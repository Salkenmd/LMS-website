<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library</title>
    <style>
        .book-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 16px;
        }
        .book-item {
            margin: 16px;
        }
        .book-title {
            font-size: 24px;
            margin-bottom: 8px;
        }
        .book-link {
            display: block;
            width: 100%;
            padding: 8px;
            text-align: center;
            text-decoration: none;
            color: #fff;
            background-color: #333;
            border-radius: 4px;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <h1>Library</h1>
    <form id="book-search-form">
        <label for="book-search-input">Search by title:</label>
        <input type="text" id="book-search-input" name="book-search-input">
        <button type="submit">Search</button>
    </form>
    <div id="book-row" class="book-row"></div>
    <script>
        document.getElementById('book-search-form').addEventListener('submit', function(event) {
            event.preventDefault();
            var searchTerm = document.getElementById('book-search-input').value;
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'book-search.php?q=' + encodeURIComponent(searchTerm), true);
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var bookRow = document.getElementById('book-row');
                    bookRow.innerHTML = '';
                    var books = JSON.parse(xhr.responseText);
                    for (var i = 0; i < books.length; i++) {
                        var book = books[i];
                        var bookItem = document.createElement('div');
                        bookItem.classList.add('book-item');
                        var bookTitle = document.createElement('h2');
                        bookTitle.classList.add('book-title');
                        bookTitle.textContent = book.title;
                        bookItem.appendChild(bookTitle);
                        var bookLink = document.createElement('a');
                        bookLink.classList.add('book-link');
                        bookLink.href = 'bookpage.php?id=' + book.id;
                        bookLink.textContent = 'View Details';
                        bookItem.appendChild(bookLink);
                        bookRow.appendChild(bookItem);
                    }
                } else {
                    console.log('Request failed.  Returned status of ' + xhr.status);
                }
            };
            xhr.send();
        });
    </script>
</body>
</html>